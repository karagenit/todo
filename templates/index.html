<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Google Tasks Organizer</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
</head>
<body>
    <form action="/reload" method="GET">
        <input type="submit" value="Reload Tasks">
    </form>

    <nav>
        {% for task_type in tasks %}
            <button onclick="showTaskType('task-{{ task_type.id }}')">
                {{ task_type.label }}
            </button>
        {% endfor %}
    </nav>
    <script>
        function showTaskType(id) {
            const taskDivs = document.querySelectorAll('[id^="task-"]');
            taskDivs.forEach(div => div.style.display = 'none');
            document.getElementById(id).style.display = 'block';
        }
        // Show first task type by default
        window.onload = function() {
            const firstTaskDiv = document.querySelector('[id^="task-"]');
            if (firstTaskDiv) {
                const taskDivs = document.querySelectorAll('[id^="task-"]');
                taskDivs.forEach(div => div.style.display = 'none');
                firstTaskDiv.style.display = 'block';
            }
        }
    </script>    
    {% for task_type in tasks %}
        <div id="task-{{ task_type.id }}">
            <h2>{{ task_type.label }}</h2>
            {% for task in task_type.tasks %}
            <form action="/update" method="POST" class="task">
                <input type="hidden" name="task_id" value="{{ task.id }}">
                <input type="text" name="title" value="{{ task.title }}"> <br>
                Priority: <input type="number" name="priority" value="{{ task.priority }}" max="3" min="1"> <br>
                Start On: <input type="date" name="start_date" value="{{ task.start_date }}"> <br>
                Due On: <input type="date" name="due_date" value="{{ task.due_date }}"> <br>
                <textarea name="description">{{ task.description }}</textarea> <br>
                <input type="submit" value="Update Task">
            </form>
            {% endfor %}
        </div>
    {% endfor %}</body>
</html>
